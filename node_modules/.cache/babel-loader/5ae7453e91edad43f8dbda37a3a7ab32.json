{"ast":null,"code":"import _defineProperty from \"/Users/aditi/Downloads/assignment13/assignment13/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/aditi/Downloads/assignment13/assignment13/src/Products.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// import React, { Component } from 'react'\n// import Filters from './Filters'\n// import ProductTable from './ProductTable'\n// import ProductForm from './ProductForm'\n// let PRODUCTS = {\n//     '1': {id: 1, category: 'Music', price: '$459.99', name: 'Clarinet'},\n//     '2': {id: 2, category: 'Music', price: '$5,000', name: 'Cello'},\n//     '3': {id: 3, category: 'Music', price: '$3,500', name: 'Tuba'},\n//     '4': {id: 4, category: 'Furniture', price: '$799', name: 'Chaise Lounge'},\n//     '5': {id: 5, category: 'Furniture', price: '$1,300', name: 'Dining Table'},\n//     '6': {id: 6, category: 'Furniture', price: '$100', name: 'Bean Bag'}\n// };\n// class Products extends Component {\n//     constructor(props) {\n//         super(props)\n//         this.state = {\n//             filterText: '',\n//             products: PRODUCTS\n//         }\n//         this.handleFilter = this.handleFilter.bind(this)\n//         this.handleDestroy = this.handleDestroy.bind(this)\n//         this.handleSave = this.handleSave.bind(this)\n//     }\n//     handleFilter(filterInput) {\n//         this.setState(filterInput)\n//     }\n//     handleSave(product) {\n//         if (!product.id) {\n//             product.id = new Date().getTime()\n//         }\n//         this.setState((prevState) => {\n//             let products = prevState.products\n//             products[product.id] = product\n//             return { products }\n//         })\n//     }\n//     handleDestroy(productId) {\n//         this.setState((prevState) => {\n//             let products = prevState.products\n//             delete products[productId]\n//             return { products }\n//         });\n//     }\n//     render () {\n//         return (\n//             <div>\n//                 <h1>My Inventory</h1>\n//                 <Filters \n//                     onFilter={this.handleFilter}></Filters>\n//                 <ProductTable \n//                     products={this.state.products}\n//                     filterText={this.state.filterText}\n//                     onDestroy={this.handleDestroy}></ProductTable>\n//                 <ProductForm\n//                     onSave={this.handleSave}></ProductForm>\n//             </div>\n//         )\n//     }\n// }\n// export default Products\nimport React, { Component } from 'react';\nimport Filters from './Filters';\nimport ProductTable from './ProductTable';\nimport ProductForm from './ProductForm';\n\nclass Products extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filterText: '',\n      products: {} // { [id]: productDocument }\n\n    };\n    this.handleFilter = this.handleFilter.bind(this);\n    this.handleDestroy = this.handleDestroy.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.loadProducts = this.loadProducts.bind(this);\n  }\n\n  componentDidMount() {\n    this.loadProducts();\n  }\n\n  async loadProducts() {\n    try {\n      const response = await fetch('/product/get');\n      const data = await response.json();\n      const products = {};\n      data.forEach(doc => {\n        products[doc.id] = doc; // doc has { id, product: { ... } }\n      });\n      this.setState({\n        products\n      });\n    } catch (err) {\n      console.error('Error loading products:', err);\n    }\n  }\n\n  handleFilter(filterInput) {\n    this.setState(filterInput);\n  }\n\n  async handleSave(productWrapper) {\n    try {\n      const response = await fetch('/product/create', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(productWrapper) // { product: { ... } }\n\n      });\n      const saved = await response.json();\n      this.setState(prevState => {\n        const products = _objectSpread({}, prevState.products);\n\n        products[saved.id] = saved;\n        return {\n          products\n        };\n      });\n    } catch (err) {\n      console.error('Error saving product:', err);\n    }\n  }\n\n  async handleDestroy(productId) {\n    try {\n      await fetch(\"/product/delete/\".concat(productId), {\n        method: 'DELETE'\n      });\n      this.setState(prevState => {\n        const products = _objectSpread({}, prevState.products);\n\n        delete products[productId];\n        return {\n          products\n        };\n      });\n    } catch (err) {\n      console.error('Error deleting product:', err);\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"My Inventory\"), React.createElement(Filters, {\n      onFilter: this.handleFilter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), React.createElement(ProductTable, {\n      products: this.state.products,\n      filterText: this.state.filterText,\n      onDestroy: this.handleDestroy,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }), React.createElement(ProductForm, {\n      onSave: this.handleSave,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Products;","map":{"version":3,"sources":["/Users/aditi/Downloads/assignment13/assignment13/src/Products.js"],"names":["React","Component","Filters","ProductTable","ProductForm","Products","constructor","props","state","filterText","products","handleFilter","bind","handleDestroy","handleSave","loadProducts","componentDidMount","response","fetch","data","json","forEach","doc","id","setState","err","console","error","filterInput","productWrapper","method","headers","body","JSON","stringify","saved","prevState","productId","render"],"mappings":"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","sourcesContent":["// import React, { Component } from 'react'\r\n// import Filters from './Filters'\r\n// import ProductTable from './ProductTable'\r\n// import ProductForm from './ProductForm'\r\n\r\n// let PRODUCTS = {\r\n//     '1': {id: 1, category: 'Music', price: '$459.99', name: 'Clarinet'},\r\n//     '2': {id: 2, category: 'Music', price: '$5,000', name: 'Cello'},\r\n//     '3': {id: 3, category: 'Music', price: '$3,500', name: 'Tuba'},\r\n//     '4': {id: 4, category: 'Furniture', price: '$799', name: 'Chaise Lounge'},\r\n//     '5': {id: 5, category: 'Furniture', price: '$1,300', name: 'Dining Table'},\r\n//     '6': {id: 6, category: 'Furniture', price: '$100', name: 'Bean Bag'}\r\n// };\r\n\r\n// class Products extends Component {\r\n//     constructor(props) {\r\n//         super(props)\r\n//         this.state = {\r\n//             filterText: '',\r\n//             products: PRODUCTS\r\n//         }\r\n//         this.handleFilter = this.handleFilter.bind(this)\r\n//         this.handleDestroy = this.handleDestroy.bind(this)\r\n//         this.handleSave = this.handleSave.bind(this)\r\n//     }\r\n\r\n//     handleFilter(filterInput) {\r\n//         this.setState(filterInput)\r\n//     }\r\n\r\n//     handleSave(product) {\r\n//         if (!product.id) {\r\n//             product.id = new Date().getTime()\r\n//         }\r\n//         this.setState((prevState) => {\r\n//             let products = prevState.products\r\n//             products[product.id] = product\r\n//             return { products }\r\n//         })\r\n//     }\r\n\r\n//     handleDestroy(productId) {\r\n//         this.setState((prevState) => {\r\n//             let products = prevState.products\r\n//             delete products[productId]\r\n//             return { products }\r\n//         });\r\n//     }\r\n\r\n//     render () {\r\n//         return (\r\n//             <div>\r\n//                 <h1>My Inventory</h1>\r\n//                 <Filters \r\n//                     onFilter={this.handleFilter}></Filters>\r\n//                 <ProductTable \r\n//                     products={this.state.products}\r\n//                     filterText={this.state.filterText}\r\n//                     onDestroy={this.handleDestroy}></ProductTable>\r\n//                 <ProductForm\r\n//                     onSave={this.handleSave}></ProductForm>\r\n//             </div>\r\n//         )\r\n//     }\r\n// }\r\n\r\n// export default Products\r\n\r\nimport React, { Component } from 'react';\r\nimport Filters from './Filters';\r\nimport ProductTable from './ProductTable';\r\nimport ProductForm from './ProductForm';\r\n\r\nclass Products extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      filterText: '',\r\n      products: {}   // { [id]: productDocument }\r\n    };\r\n    this.handleFilter = this.handleFilter.bind(this);\r\n    this.handleDestroy = this.handleDestroy.bind(this);\r\n    this.handleSave = this.handleSave.bind(this);\r\n    this.loadProducts = this.loadProducts.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadProducts();\r\n  }\r\n\r\n  async loadProducts() {\r\n    try {\r\n      const response = await fetch('/product/get');\r\n      const data = await response.json();\r\n\r\n      const products = {};\r\n      data.forEach((doc) => {\r\n        products[doc.id] = doc; // doc has { id, product: { ... } }\r\n      });\r\n\r\n      this.setState({ products });\r\n    } catch (err) {\r\n      console.error('Error loading products:', err);\r\n    }\r\n  }\r\n\r\n  handleFilter(filterInput) {\r\n    this.setState(filterInput);\r\n  }\r\n\r\n  async handleSave(productWrapper) {\r\n    try {\r\n      const response = await fetch('/product/create', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(productWrapper) // { product: { ... } }\r\n      });\r\n\r\n      const saved = await response.json();\r\n\r\n      this.setState((prevState) => {\r\n        const products = { ...prevState.products };\r\n        products[saved.id] = saved;\r\n        return { products };\r\n      });\r\n    } catch (err) {\r\n      console.error('Error saving product:', err);\r\n    }\r\n  }\r\n\r\n  async handleDestroy(productId) {\r\n    try {\r\n      await fetch(`/product/delete/${productId}`, {\r\n        method: 'DELETE'\r\n      });\r\n\r\n      this.setState((prevState) => {\r\n        const products = { ...prevState.products };\r\n        delete products[productId];\r\n        return { products };\r\n      });\r\n    } catch (err) {\r\n      console.error('Error deleting product:', err);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>My Inventory</h1>\r\n        <Filters onFilter={this.handleFilter} />\r\n        <ProductTable\r\n          products={this.state.products}\r\n          filterText={this.state.filterText}\r\n          onDestroy={this.handleDestroy}\r\n        />\r\n        <ProductForm onSave={this.handleSave} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Products;\r\n"]},"metadata":{},"sourceType":"module"}